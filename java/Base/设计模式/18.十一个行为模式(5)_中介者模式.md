# 中介者模式-Mediator Pattern

**中介者模式-Mediator Pattern【学习难度：★★★☆☆，使用频率：★★☆☆☆】**

多个组件(对象)之间有复制的网路关系，某一组件变化时需要做特定的变化，增加，删除和修改一个组件会导致其他组件代码的修改，违背了“开闭原则”，为了协调多个组件间的关系，于是有了中介者模式



## 1. 引入

qq 中的群，充当中介者，发送消息和文件通过群，发送到每一用户。



## 2. 角色

- **Mediator（抽象中介者）：**用于定义与各同事对象之间进行通信。
-  **ConcreteMediator（具体中介者）：**抽象中介者的子类，协调各个同事对象来实现协作行为，它维持了对各个同事对象的引用。
- **Colleague（抽象同事类）：**定义各个同事类公有的方法，并声明了一些抽象方法来供子类实现；维持了一个对抽象中介者类的引用，其子类可以通过该引用来与中介者通信。
- **ConcreteColleague（具体同事类）：**抽象同事类的子类；与中介者通信，通过中介者来间接完成与其他同事类的通信。

## 3. 定义

用一个中介对象(中介者)来封装一系列的对象交互，对象不需要显示地相互引用，使其耦合松散，**中介者模式又称为调停者模式**，它是一种对象行为型模式。

### 3.1 职责1： 中转作用（结构性）

- 维持对各个同事的引用
- 各个同事对象需要和其他同事通信时，通过中介者来实现间接调用。

### 3.2 职责2：  协调作用（行为性）

- 对同事之间的关系进一步封装，封装内部协调逻辑，将同事成员之间的关系行为进行分离和封装



## 4. code

### 

## 5. 总结

### 5.1 模式名称(pattern name)

中介者模式-Mediator Pattern



### 5.2 问题(Problem)

一系列相互协作的对象之间，充满负责的网络关系，在对象中进行维护行为对其他对象的变化时，将导致耦合性过高，一个对象发生变化时，不得不得对相关的对象进行修改



### 5.3 解决方案(Solution)

提供中介者对象，由中介者协调对象间的通信，和对象间调用逻辑封装



### 5.4 效果(Consequences)

- 主要优点
  - 简化对象间的交互，由原来的**多对多变成一对多**，**网络结构转换成星型结构**；
  - 将各同事对象解耦。修改，删除，新增同事类都比较方便，更加**符合“开闭原则”**；
  - 减少子类的生成，由各个对象的行为集中到中介者，使得**同事类可以被重用**，**改变行为只需要生产新的中介者子类**即可。

- 主要缺点
  - 具体中介者中维护同事间的交互细节，导致逻辑复杂，难以维护



### 5.5 使用场景

- 对象间存在复杂的引用关系，系统结构混乱
- 一个对象引用了其他对象，并直接进行通信，导致该对象难以被复用
- 不想生成多个子类来处理行为