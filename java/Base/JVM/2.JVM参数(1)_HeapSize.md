# JVM 参数(1): HeapSize



## 1. Heap Size

### 1.1 特点

- jvm 所管理的**内存中最大的一块**
- 被所有线程共享的一块内存区域
- jvm 启动的时候创建
- 唯一目的是存放对象实例
- 在《Java虚拟机规范》中对Java堆的描述是：“**所有的对象实例以及数组都应当在堆上分配**”【逃逸分析技术,栈上分配,标量替换，已经突破了这个概念】
- Java 堆是垃圾收集器管理的内存区域，因此也叫 GC堆 （GarbageCollected Heap）
  - 新生代，老年代，永久代，Eden空间，“From Survivor空间，To Survivor空间
- 线程共享的Java堆中可以划分出多个线程私有的分配缓冲区（Thread Local Allocation Buffer，TLAB）
- Java堆可以处于物理上不连续的内存空间中，但在逻辑上它应该被视为连续的



### 1.2 JVM 参数

- Xmx
- Xms
- MaxHeapSize
- InitialHeapSize


## 2.JVM 参数
### 2.1 Xmx: Heap 的最大值

#### 2.1.1 用法

```
-Xmx___
```

等价于

```
-XX:MaxHeapSize=___
```

#### 2.1.2 默认值

| 平台/版本 | jdk6 | jdk7 | jdk8 |
| --------- | ---- | ---- | ---- |
|linux|1002438656|1002438656|1002438656|
|macOs|132120576|4294967296|4294967296|
|windows|2132803584|2132803584|2132803584|



### 2.2 Xms: Heap 的初始化的大小(也是最小值)

#### 2.2.1 用法

```
-Xms___
```

等价于

```
-XX:InitialHeapSize=___
```

#### 2.2.2 默认值

| 平台/版本 | jdk6      | jdk7      | jdk8      |
| --------- | --------- | --------- | --------- |
| linux     | 62560320  | 62560320  | 62914560  |
| macOs     | 0         | 268435456 | 268435456 |
| windows   | 133236352 | 133236352 | 134217728 |



### 2.3. MaxHeapSize: Heap 的最大值

#### 2.3.1 用法

```
-XX:MaxHeapSize=___
```

等价于

```
-Xmx___
```

#### 2.3.2 默认值

| 平台/版本 | jdk6       | jdk7       | jdk8       |
| --------- | ---------- | ---------- | ---------- |
| linux     | 1002438656 | 1002438656 | 1002438656 |
| macOs     | 132120576  | 4294967296 | 4294967296 |
| windows   | 2132803584 | 2132803584 | 2132803584 |





### 2.4. InitialHeapSize: Heap 的初始化的大小(也是最小值)

#### 2.4.1 用法

```
-XX:InitialHeapSize=___
```

等价于

```
-Xms___
```

#### 2.4.2 默认值

| 平台/版本 | jdk6      | jdk7      | jdk8      |
| --------- | --------- | --------- | --------- |
| linux     | 62560320  | 62560320  | 62914560  |
| macOs     | 0         | 268435456 | 268435456 |
| windows   | 133236352 | 133236352 | 134217728 |

