# 前言

- 基础原理篇

该篇包含第1～3章的内容。第1章的内容包括智者的挑战、人造与神造、程序是如何运行的、什么是操作系统、魔术与管理、用户程序与操作系统、操作系统范畴和为什么学习操作系统。第2章探讨操作系统演变的主要过程：从单一控制终端、单一操作员，到批处理、多道批处理、分时操作系统、实时操作系统、现代操作系统；对商业操作系统演变的过程进行了分析，然后探讨操作系统的分类和未来发展趋势。第3章简要回顾计算机硬件基本知识，探讨什么是“抽象”，讲解用户态与内核态，阐述操作系统结构、系统调用、操作系统的壳等知识。

- 进程原理篇

该篇对操作系统最核心的概念——进程进行讲解，包括第4～6章的内容。第4章阐述进程出现的逻辑必然性、多道编程的效率、进程的创建和消亡、进程的状态及其转换、进程与地址空间、进程模型的实现和进程模型的缺陷。第5章讲解进程模型实现的手段：调度，主要内容包括调度的目标，先来先服务、时间片轮转、短任务优先、优先级调度、混合调度、实时调度等算法，并对优先级倒挂和线程的不确定性进行讨论。第6章的内容包括为什么要通信、管道、记名管道、套接字、信号、信号量、共享内存、消息队列等

- 线程原理篇

进程虽然让并发从理想变为现实，但其自身却是串行的：进程只有一个执行序列。若要使进程本身也提供并发，则需要对线程进行讨论。该篇讨论了进程级的并发机制-线程模型，包括第7～10章的内容。第7章的内容包括进程分身术——线程、线程管理、线程的用户态和内核态以及混合态实现、现代操作系统的线程实现模型、多线程之间的关系、线程模型主要考虑的问题等。第8章的内容包括为什么同步、同步的目的、锁原语的进化、睡觉与叫醒原语、信号量、管程、消息传递和栅栏等。第9章对死锁的产生、发展、防止与避免进行讲解，并讨论死锁、活锁和饥饿的关系。第10章讲述如何使用中断启用和禁止、测试与设置来实现锁原语。

- 内存原理篇

该篇对操作系统的另外一个重要构成部分——内存管理进行阐述，包括第11～14章的内容。第11章讲述内存管理的环境、内存管理的目标、虚拟内存、操作系统在内存中的位置、单道编程的内存管理、固定加载地址、多道编程的内存管理、固定分区、非固定分区、交换、地址翻译、闲置空间管理等内容。第12章讲解的内容包括基址极限的问题、分页管理、页表、页面翻译过程、分页管理系统的优缺点、多级页表、地址翻译速度、锁住页面、内存抖动和页面尺寸设计。第13章对页面更换算法的来龙去脉、欲达到的目的、各种具体的页面更换算法进行细致讲解。第14章的内容包括分段管理系统、分段的优缺点、段号与寻址位数，并对否定之否定在内存管理模式发展过程中的作用进行了讨论。

- 文件原理篇

该篇对操作系统的第三个核心构件——文件系统进行讲解。包括第15～18章的内容。第15章讲述的内容包括磁盘结构、磁盘访问速度、磁盘的操作系统界面、磁盘访问过程和磁盘调度。第16章讲述为什么需要文件系统、什么是文件系统、文件系统的目的、文件的基本知识、文件的存储结构、文件类型、文件访问、文件属性、文件操作、文件夹、相对与绝对路径、共享与链接、内存映射的文件等内容。第17章的内容包括文件系统分布、文件的实现、文件夹的实现、共享文件的实现、磁盘空间的管理等。第18章的内容包括文件安全性能（文件访问控制、访问控制表、能力表）、文件可靠性能（持久性、一致性、日志、交易、随影、一致性检查）和文件系统的效率性能（提前读取、减少磁臂移动距离、日志结构的文件系统LFS）
I/O原理篇该篇对计算机与外界进行沟通的机制——输入与输出进行讲解。该篇仅有一章（第19章），讨论的内容包括输入输出的重要性和目的、输入输出硬件的哲学原理、物理I/O模式（专有通道I/O、内存映射的I/O、复合I/O、DMA）、输入输出软件的哲学原理、软件I/O模式（可编程I/O、中断驱动的I/O、DMA）、I/O软件分层和设备驱动程序等。

- 多核原理篇

该篇对新出现的多核技术进行讲解，重点讨论多核环境给操作系统带来的影响。该篇分为多核结构和多核环境下的进程同步与调度两章。第20章讲解的内容包括多核处理器结构（超线程结构、多核结构、多核超线程结构）、多核内存结构（UMA、NUMA、COMA、NORMA）、对称多核处理器计算机的启动过程、多处理器之间的通信、SMP缓存一致性等。第21章的内容包括多核进程同步、多核环境下的软件同步原语、旋锁及其实现、队列旋锁、多核环境下的进程调度、多核环境下的能耗管理和多核系统性能。
操作系统设计篇该篇从高屋建瓴的角度对操作系统设计的十条哲学原理进行阐述。显然，操作系统的设计原则有很多，本篇选取的只是诸多原则里面非常重要的十条。第22章将从操作系统和人类社会两个层面对这十条原理进行论述与比较，以使读者更加清楚地明白操作系统就是人类社会在计算机里面的反映。读者可自行发现操作系统的其他设计原则。