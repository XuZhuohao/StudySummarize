# zookeeper 扩容
## 1. 准备
### 1.1 集群状态

|  原有计算机名称   |  IP   |  角色  | myid   |  clinet port   |
| --- | --- | --- | --- | --- |
|  PF-kafka-zk   |  192.168.49.25   |  follower   |   0  |  2181   |
|  PF-kafka-zk   |  192.168.49.25   |  leader     |   1  |  2182  |
|  PF-kafka-zk   |  192.168.49.25   |  follower   |   2  |  2183  |


|  新加入计算机名称   |  IP   |  角色  | myid   |  clinet port   |
| --- | --- | --- | --- | --- |
|  PF-kafka-zk-2   |  192.168.49.45   |  无   |   101  |  2181  |
|  PF-kafka-zk-3   |  192.168.49.44   |  无   |   102  |  2181  |

### 1.1 原集群配置
```
server.1=127.0.0.1:2887:38887
server.2=127.0.0.1:2888:38888
server.3=127.0.0.1:2889:38889
```
**这个配置，只能通过 127.0.0.1 去进行集群通讯连接，需要修改配置如下**
···
server.1=192.168.49.25:2887:38887
server.2=192.168.49.25:2888:38888
server.3=192.168.49.25:2889:38889
···
**滚动重启有大问题**


dataDir=/home/appadm/zookeeper/temp/data
dataLogDir=/home/appadm/zookeeper/temp/log
server.1=192.168.49.25:2887:38887
server.2=192.168.49.25:2888:38888
server.3=192.168.49.25:2889:38889
server.101=192.168.49.45:2888:3888
server.102=192.168.49.44:2888:3888

