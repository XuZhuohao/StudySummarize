# 简单工厂模式-Simple Factory Pattern

简单工厂模式-Simple Factory Pattern【学习难度：★★☆☆☆，使用频率：★★★☆☆】  

简单工厂模式并不属于GoF 23个经典设计模式，但通常将它作为学习其他工厂模式的基础  

因为在简单工厂模式中用于创建实例的方法是静态(static)方法，因此简单工厂模式又被称为**静态工厂方法(Static Factory Method)模式**  

## 1. 引入

工厂模式是**最常用**的一类创建型设计模式，小弟**简单工厂模式**，二哥**工厂方法模式**，大哥**抽象工厂模式**，简单工厂模式通常将它作为学习其他工厂模式的基础。

## 2. 角色

- 产品类(ConcreteProduct)：把不同对象的代码封装到不同类中，它是 Factory 创建的目标，继承 Product 并实现其方法。   
- 抽象产品类(Product)：把产品类的公共部分抽象和提取封装而成，产品类的父类，提供各种产品类对象的公有方法。  
- 工厂类(Factory)：用于创建各种产品，根据入参创建各种产品，提供静态的工厂方法(factoryMethod)，返回类型为抽象产品类型Product。

## 3. 定义

工厂类可以根据**参数不同返回不同的实例**，被创建的**实例通常都具有共同父类**。创建实例的方法为**静态方法**  

## 4. code

### 4.1 原代码

- HistogramChart.java

  ```java
  public class HistogramChart {
      public static final String TYPE = "histogram";
  
      public void display(Object[][]  data){
          System.out.println(TYPE + ":" + data);
      }
  }
  ```

- LineChart.java

  ```java
  public class LineChart {
      public static final String TYPE = "line";
  
      public void display(Object[][] data) {
          System.out.println(TYPE + ":" + data);
      }
  }
  ```

  

- PieChart.java

  ```java
  public class PieChart {
      public static final String TYPE = "pie";
  
      public void display(Object[][] data) {
          System.out.println(TYPE + ":" + data);
      }
  }
  ```

- ChartUtil.java

  ```java
  public class ChartUtil {
      public static void main(String[] args) {
          final Object[][] objects = new Object[3][3];
          ChartUtil.display(objects, HistogramChart.TYPE);
      }
  
      public static void display(Object[][] data, String type) {
          if (type.equalsIgnoreCase(HistogramChart.TYPE)) {
              //柱状图
              new HistogramChart().display(data);
          } else if (type.equalsIgnoreCase(PieChart.TYPE)) {
              //饼状图
              new PieChart().display(data);
          } else if (type.equalsIgnoreCase(LineChart.TYPE)) {
              //折线图
              new LineChart().display(data);
          }
      }
  }
  ```

  

### 4.2 重构后

- Chart.java

  ```java
  public interface Chart {
      void display(Object[][] data);
  }
  ```

- HistogramChart.java

  ```java
  public class HistogramChart implements Chart{
      public static final String TYPE = "histogram";
      @Override
      public void display(Object[][] data){
          System.out.println(TYPE + ":" + data);
      }
  }
  ```

- LineChart.java

  ```java
  public class LineChart implements Chart {
      public static final String TYPE = "line";
      @Override
      public void display(Object[][] data) {
          System.out.println(TYPE + ":" + data);
      }
  }
  ```

  

- PieChart.java

  ```java
  public class PieChart implements Chart {
      public static final String TYPE = "pie";
      @Override
      public void display(Object[][] data) {
          System.out.println(TYPE + ":" + data);
      }
  }
  ```

  

- ChartFactory.java

  ```java
  public class ChartFactory {
      public static Chart getChart(String type) {
          if (type.equalsIgnoreCase(HistogramChart.TYPE)) {
              //初始化柱状图
              return new HistogramChart();
          } else if (type.equalsIgnoreCase(PieChart.TYPE)) {
              //初始化饼状图
              return new PieChart();
          } else if (type.equalsIgnoreCase(LineChart.TYPE)) {
              //初始化折线图
              return new LineChart();
          } else{
              throw new RuntimeException("没有对应的类型");
          }
      }
  }
  ```

- ChartUtil.java

  ```java
  public class ChartUtil {
      public static void main(String[] args) {
          final Object[][] objects = new Object[3][3];
          /// 原代码
  //        ChartUtil.display(objects, HistogramChart.TYPE);
          ChartFactory.getChart(HistogramChart.TYPE).display(objects);
      }
  }
  ```

  