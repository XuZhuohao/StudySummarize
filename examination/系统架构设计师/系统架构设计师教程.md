

# 系统架构设计师教程

- 参考资料
  - 《系统架构设计师教程》希赛
  - 





## 1. 计算机组成与体系结构



### 1.1 计算机的组成

#### 1.1.1 组成

原始冯·诺依曼设计以 **运算器为中心**， 现在一 **存储器为中心**

- 组成：**CPU 上的控制器和运算器，内存（主存），硬盘（外存），输入/输出设备**
  - 控制器：分析和执行指令
    1. 程序计数器 PC:  存储下一条要执指令的地址
    2. 指令寄存器 IR: 存储即将执行的指令
    3. 指令译码器 ID: 对指令中的操作码字段进行分析解释
    4. 时序部件：提供时序控制信号
  - 运算器：也称算数逻辑单元（Arithmetic and Logic Unit, ALU）,在控制器的控制下完成算术运算和逻辑运算
    1. 算数逻辑单元 ALU： 数据的算术运算和逻辑运算
    2. 累加寄存器 AC：通用寄存器，暂存数据
    3. 数据缓冲寄存器 DR： 写内存是，暂存指令或数据
    4. 状态条件寄存器 PSW：存状态标志与控制标志
  - 主存储器：通常称为 **内存** 或 **主存** ，存储操作的信息和中间结果，包括机器指令和数据
  - 辅助存储器：**外存**、**辅存**，存储需要长时间保存的各种信息
  - 输入设备
  - 输出设备



#### 1.1.2 Flynn 分类

**Flynn分类：** 根据指令流、数据流的多倍性特征对计算机系统进行分类

`指令流`：指机器执行的指令序列

`数据流`：指由指令流调用的数据序列，包括输入数据和中间结果，但不包括输出数据

1. **单指令流单数据流**（Single Instruction stream and Single Data stream, SISD）
   - 顺序执行指令
   - 单处理器计算机
   - 每次之多一条指令进行译码
   - 支队一个操作部件分配数据
2. **单指令流多数据流**（Single Instruction stream and Multiple Data stream, SIMD）
   - 以并行处理机（矩阵处理机）为代表
   - 包含多个重复的处理单元
   - 单一指令部件，按统一指令流要求分配不同数据
3. **多指令流单数据流**（Multiple Instruction stream and Single Data stream, MISD）
   - 有 n 个处理单元
   - n 条不同指令对同一数据流以及中间结果进行不同的处理。
   - 该类型很少见
4. **多指令流多数据流**（Multiple Instruction stream and Multiple Data stream, MIMD）
   - 作业、任务、指令等各级全面并行的多机系统。
   - 多核处理器、多处理机

| 类型 | 结构                                               | 关键特性                               | 代表                                       |
| ---- | -------------------------------------------------- | -------------------------------------- | ------------------------------------------ |
| SISD | 控制部分：一个<br>处理器：一个<br>主存模块：一个   |                                        | 单处理器系统                               |
| SIMD | 控制部分：一个<br/>处理器：多个<br/>主存模块：多个 | 各处理器以异步的形式执行同一条指令     | 并行处理机<br>阵列处理机<br>超级限量处理机 |
| MISD | 控制部分：多个<br/>处理器：一个<br/>主存模块：多个 | 被证明不可能，至少不实际               | 有文献称流水线计算机                       |
| MIMD | 控制部分：多个<br/>处理器：多个<br/>主存模块：多个 | 能够实现作业、任务、指令等各级全面并行 | 多处理机系统<br>多计算机                   |



#### 1.1.3 指令集系统

指令系统的优化设计有两个截然相反的方向，**复杂指令系统计算机** 和 **精简指令系统计算机**

- **复杂指令系统计算机（Complex Instruction Set Computer, CISC）**：增强指令的功能，设置一些复杂的指令，把软件实现的常用的功能改为硬件的指令来实现
- **精简指令系统计算机（Reduced Instruction Set Computer, RISC）**：尽量简化指令功能，只保留功能简单，能在一个节拍内执行完成指令



**CISC 特点：**

1. 指令多，通常由100-250条
2. 指令使用频率悬殊
3. 多种寻找方式，通常有 5-20 种
4. 变长的指令。指令长度不固定，增加指令译码的复杂性
5. 指令可以直接处理主存单元中的数据，执行速度较慢
6. 以微程序控制为主。CISC 太过复杂，难以用硬布线逻辑电路实现控制，通常采用微程序控制



**RISC 特点：**

1. 指令少
2. 寻找方式少，通常只有寄存器寻址方式，立即数寻址方式和相对寻址方式
3. 指令长度固定，译码相对容易
4. 以硬布线逻辑控制为主。
5. 单周期指令执行，采用流水线技术
6. 优化的编译器
7. CPU 中寄存器的数量躲，一般在 32 个以上，甚至达到上千个



#### 1.1.4 总线

**总线**是一组能为多个部件分时共享的公共信息传送线路

- 共享：只总线上能挂接多个部件，部件间通过总线交换信息
- 分时：同一时刻只能有一个部件向总线发送信息
- 按总线位置分类
  - 内部总线：在CPU内部，寄存器间和ALU与控制部件间传输数据所用的总线
  - 外部总线：CPU与内存RAM、ROM和输入/输出设备接口之间进行通信的通路
- 按功能分类
  - 地址总线：传送地址信息
  - 数据总线：传送数据信息
  - 控制总线：传送控制信号



### 1.2 存储器系统

传统存储器一般分为**高速缓冲存储器（Cache）**，**主存**，**辅存**三级





