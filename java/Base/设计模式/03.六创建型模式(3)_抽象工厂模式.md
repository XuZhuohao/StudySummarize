# 抽象工厂模式-Abstract Factory Pattern

抽象工厂模式-Abstract Factory Pattern【学习难度：★★★★☆，使用频率：★★★★★】

由于工厂方法模式中具体工厂类和具体产品类是一一对应的关系，导致系统开销增大，代码中存在大量的工厂类，通过将**相关的产品组成"产品族"，再由同一个工厂来统一生产**。

## 1. 引入

针对工厂方法模式使用有以下问题：

- 工厂类过多，造成代码过多和系统开销增加
- 产品类过多，使用起来过于繁琐

## 2. 角色

### 2.1 概念

- 产品等级结构（产品的继承结构）：产品抽象类和产品具体类组件构成一个产品等级结构，如电视机是父类，具体产品品牌的电视机是其子类。
- 产品族：**由同一个工厂**生产的产品**位于不同产品等级结构**中的一组产品构成一个产品族。

![product level](https://raw.githubusercontent.com/XuZhuohao/picture/master/java/Base/design-pattern/3.product-level.png)



### 2.2 角色

● AbstractFactory（抽象工厂）：声明了一组用于创建一族产品的方法，每一个方法对应一种产品。

● ConcreteFactory（具体工厂）：实现了在抽象工厂，生成一组具体产品(产品族)

● AbstractProduct（抽象产品）：抽象产品中声明了产品所具有的业务方法

● ConcreteProduct（具体产品）：实现抽象产品接口中声明的业务方法



## 3. 定义

定义一个工厂类，用于生产位于不同产品等级结构，属于不同类型的具体产品(一个产品族)

- 抽象工厂模式是所有工厂模式中最为抽象和最具一般性的一种形式
- 工厂方法模式针对的是一个产品等级结构，抽象工厂模式需要面对**多个产品等级结构**

**提供一个创建一系列相关或相互依赖对象的接口，而无须指定它们具体的类。抽象工厂模式又称为Kit模式，它是一种对象创建型模式。**



## 4. uml

### ![Abstract Factory Pattern](https://raw.githubusercontent.com/XuZhuohao/picture/master/java/Base/design-pattern/3.Abstract-Factory-Pattern.png)



## 5. 总结

### 5.1 模式名称(pattern name)

抽象工厂模式



### 5.2 问题(Problem)

解决工程方法模式中，工程类过多的问题



### 5.3 解决方案(Solution)

提供一个创建一系列相关或相互依赖对象的接口



### 5.4 效果(Consequences)

- 主要优点
  - 增加产品族，很好地支持了“开闭原则”，只需要增加具体产品并对应增加一个新的具体工厂，对已有代码无须做任何修改

- 主要缺点
  - 增加新的产品等级结构很麻烦，需要修改所有的工厂角色，违背了“开闭原则”。抽象工厂模式的这种性质称为**“开闭原则”的倾斜**

### 5.5 使用场景

- 一个系统不应当依赖于产品类实例如何被创建、组合和表达的细节，这对于所有类型的工厂模式都是很重要的，用户无须关心对象的创建过程，将对象的创建和使用解耦
- 系统中有多个产品族，且每次使用某一产品族，方便动态修改和新增产品族。
- 约束统一产品族，没有任何关系的对象，具有统一的共同约束
- 产品等级结构稳定，设计完成之后，不会向系统中增加新的产品等级结构或者删除已有的产品等级结构。
