# 建造者模式-Builder Pattern

建造者模式-Builder Pattern【学习难度：★★★★☆，使用频率：★★☆☆☆】

**(对象创建型模式)**

创建一个由多个部件组成的复杂产品。



## 1. 引入

建造者模式为客户端返回的不是一个简单的产品，而是一个由多个部件组成的复杂产品。



## 2. 角色

- **Builder（抽象建造者）：** 为创建产品对象的各个部件指定抽象接口，一般分两类方法，一类是 buildPartX() ，用于创建各个部件；另一类是 getResult() 用于返回复制对象。
- **ConcreteBuilder（具体建造者）：** 实现 Builder 接口。
- **Product（产品角色）：** 被构建的复制对象，包括多个组成部件，具体建造者内部定义了该产品的装配过程。
- **Director（指挥者）：** 又称为导演类，安排复杂对象的建造次序，在其construct()建造方法中调用建造者对象的部件构造与装配方法。客户端与之交互，传入具体建造者。**也可以将 Director 行为放到 builder 中。**
- 可以增加被称为**钩子方法(HookMethod)**的特殊方法来控制是否对某个buildPartX()的调用

## 3. 定义

将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。



## 4. uml

![Abstract Factory Pattern](https://raw.githubusercontent.com/XuZhuohao/picture/master/java/Base/design-pattern/6.Builder-Pattern.png)



## 5. 总结

### 5.1 模式名称(pattern name)

建造者模式-Builder Pattern



### 5.2 问题(Problem)

生成多部件组成的产品，过程太过复杂



### 5.3 解决方案(Solution)

构建与表示分离，建造者负责实现构建的部件方法和产品，指挥者负责按照一定顺序构建部件



### 5.4 效果(Consequences)

- 主要优点
  - 客户端不需要知道内部组成细节，将产品的**创建过程解耦**，使相同创建过程可以创建普通产品；
  - 每一个具体建造者都相对独立，方便替换和新增具体创建者，不同具体创建者创建不同产品；由于指挥者类针对抽象建造者编程，增加新的具体建造者无须修改原有类库的代码，**符合“开闭原则”**;
  - 可以很精细地控制产品的创建过程。**创建过程清晰，方便控制**。

- 主要缺点
  - 产品需要较多共同点，组成部分相似；差异较大时不适用。因此**使用范围受到一定的限制**；
  - 产品内部如果变化负责，那么需要很多的具体建造类来实现，导致系统庞大，增加理解难度和运行成本。

### 5.5 使用场景

- 产品对象有复杂的内部结构(通常有多个成员属性)；
- 产品对象的属性相互依赖，具有特定的生成顺序；
- 对象的创建过程独立与创建对象的类；
- 隔离复杂对象的创建和使用，并使得相同的创建过程可以创建不同的产品。
